<!DOCTYPE html>
<html lang="fi" dir="ltr">

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="../css/styles.css">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet">
  <title>Harjoitus 3</title>
  <script src="../js/main.js"></script>
</head>

<body>
  <nav class="main-navigation">
    <h1>Linux-palvelimet</h1>
    <p>Oskari Holopainen</p>
    <a href="../../index.html">Takaisin</a>
  </nav>
  <h1>Harjoitus 3</h1>

  <h4>06.02.2020 klo 16.58 Xubuntu amd64 18.04.3 LTS Live, <a target="_blank" href="./h1.html#hardware">Koneen
      laitteisto</a></h4>

  <h2>a) Apache2-webpalvelimen asennus</h2>
  <p>
    Aloin asentamaan apachea komennolla sudo apt-get y install apache2. Hetken päästä asennus oli valmis. Kokeilin
    localhostista, näkyykö oletussivu. Oletussivu näkyi,
    vaikutti siltä että asennus onnistui. Seuraavaksi käyttäjien kotisivut.
  </p>
  <img src="../img/h3/apache-default.png" alt="apache default page">
  <p>
    Käyttäjien kotisivut voisi ottaa käyttöön komennolla sudo a2enmod userdir, mutta nyt lähdin kokeilemaan linkitystä
    komennolla
    ln -s. Ensin tein hakemiston public_html käyttäjän
    kotihakemistoon verkkosivuja varten komennolla cd && mkdir public_html. Loin sinne testitiedoston index.html
    komennolla echo "Testi" > index.html.</p>
  <p>
    Ajoin komennot sudo ln -s /etc/apache2/mods-available/userdir.conf /etc/apache2/mods-enabled/userdir.conf ja sudo ln
    -s /etc/apache2/mods-available/userdir.load
    /etc/apache2/mods-enabled/userdir.load
  </p>
  <p>Aluksi ei vaikutus näkynyt, täytyi uudelleenkäynnistää palvelindemoni: sudo systemctl restart apache2.
    Tämän jälkeen muutokset tulivat näkyviin.</p>

  <img src="../img/h3/userdir.png" alt="userdir">
  <p>
    Testitiedosto tuli selaimeen näkyviin osoitteessa localhost/~xubuntu/, käyttäjän kotisivut vaikuttivat toimivan.
  </p>

  <h2>b) Apachen loki</h2>
  <p>
    Avasin apachen access-lokitiedoston komennolla cd /var/log/apache2/ && tail -f access.log. Päivitin sivun
    selaimesta, ja lokiin
    ilmestyi GET-pyyntö.
  </p>
  <h4>Onnistunut sivun lataus</h4>

  <img src="../img/h3/200.png" alt="HTTP 200">
  <p>
    Ensimmäinen osa, eli IP-osoite 127.0.0.1 on sama kuin isäntäkoneen localhost. Tämän jälkeen hakasuluissa näkyy
    aikaleima (huom. aikavyöhyke on leimassa UTC, eli pari
    tuntia Suomen aikaa jäljessä.). Tämän jälkeen pyynnön tyyppi, url ja sen protokolla, eli kyseessä on HTTP
    GET-tyyppinen pyyntö osoitteeseen 127.0.0.1/~xubuntu. Sen jälkeen
    statuskoodi 200, joka vastaa onnistunutta pyyntöä, jota seuraa vastauksen pituus tavuina, tässä tapauksessa 286.
    Tätä osiota seuraa tiedot user-agentista, eli tietoja
    pyynnön tehneestä selaimesta ja järjestelmästä. Riviltä käy ilmi selain, eli Mozilla Firefox versio 68, ja
    käyttöjärjestelmä xubuntu linux
    x86_64. Geckotrail 20100101, eli tieto siitä, että selain on Gecko-pohjainen.
    rv:68.0 on geckoversio, joka siis on sama kuin Firefoxin versio.
  </p>
  <h4>Epäonnistunut sivun lataus</h4>

  <img src="../img/h3/404.png" alt="HTTP 404">
  <p>
    Tässä on muuten sama rakenne kuin aiemmassa, mutta vastaus on tavuina hieman pitempi (488), statuskoodi 404, eli Not
    Found. Aikaleima on hetkeä aiemmin kuin edellinen onnistunut
    lokitapahtuma, eli pyyntö oli tehty ennen kuin suoritin komennon sudo systemctl restart apache2 kohdassa a).
  </p>

  <h2>Lähteet</h2>
  <div class="sources">
    <a target="_blank"
      href="http://terokarvinen.com/2020/aikataulu-linux-palvelimet-ict4tn021-3010-torstai-aamu-alkukevat-2020-5-op">http://terokarvinen.com/2020/aikataulu-linux-palvelimet-ict4tn021-3010-torstai-aamu-alkukevat-2020-5-op</a>
    <a target="_blank"
      href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent/Firefox">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent/Firefox</a>
  </div>
  <button onclick="topFunction()" id="myBtn" title="Go to top">Takaisin ylös</button>
</body>

</html>